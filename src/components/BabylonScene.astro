<canvas id="renderCanvas"></canvas>

<script>
    import { Engine, Scene, ArcRotateCamera, Vector3, SplattingTools } from "@babylonjs/core";

    const canvas = document.getElementById("renderCanvas") as HTMLCanvasElement;
    const engine = new Engine(canvas, true);

    const createScene = async () => {
        const scene = new Scene(engine);

        const camera = new ArcRotateCamera("camera", -Math.PI / 2, Math.PI / 2.5, 10, new Vector3(0, 0, 0), scene);
        camera.attachControl(canvas, true);
        camera.wheelPrecision = 50;

        await SplattingTools.LoadFileAsync(scene, "/spz/gs-scene4.spz");

        return scene;
    };

    const main = async () => {
        const scene = await createScene();
        engine.runRenderLoop(() => {
            if (scene) {
                scene.render();
            }
        });
    };

    main();

    window.addEventListener("resize", () => {
        engine.resize();
    });
</script>
